var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);r.prototype=t.prototype,e.prototype=new r},__awaiter=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,a){function o(e){try{d(i.next(e))}catch(t){a(t)}}function s(e){try{d(i["throw"](e))}catch(t){a(t)}}function d(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(o,s)}d((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return i([e,t])}}function i(r){if(n)throw new TypeError("Generator is already executing.");for(;d;)try{if(n=1,a&&(o=a[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return d.label++,{value:r[1],done:!1};case 5:d.label++,a=r[1],r=[0];continue;case 7:r=d.ops.pop(),d.trys.pop();continue;default:if(o=d.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){d=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){d.label=r[1];break}if(6===r[0]&&d.label<o[1]){d.label=o[1],o=r;break}if(o&&d.label<o[2]){d.label=o[2],d.ops.push(r);break}o[2]&&d.ops.pop(),d.trys.pop();continue}r=t.call(e,d)}catch(i){r=[6,i],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n,a,o,s,d={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},getEnergyModal=function(e){function t(t,r,i){void 0===t&&(t=0),void 0===r&&(r=""),void 0===i&&(i=1);var n=e.call(this)||this;return n.currentNum=0,n.status=1,n.suid=userDataMaster.myInfo.uid,n.day=userDataMaster.getToday(),n.requestTime=0,n.type=1,t&&(n.suid=t),""!=r&&(n.day=r),n.type=i,n}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;1==e.type?e.getMyInfo():(e.numTip.visible=!0,e.title.texture=RES.getRes("img_tittle_07_png"),e.getBtn.texture=RES.getRes("btn_share_get_png"),e.getText.text="分享到群，自己就能领取一份",e.status=2),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getFun,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this)},t.prototype.getMyInfo=function(){var e=this;if(!userDataMaster.getMyInfo.uid)return e.requestTime++,void(e.requestTime<5&&setTimeout(function(){e.getMyInfo()},500));var t={uid:userDataMaster.sourceEnergy.uid,be_invitation_uid:userDataMaster.getMyInfo.uid,share_day:userDataMaster.sourceEnergy.day};ServiceMaster.post(ServiceMaster.getEnergy,t,function(t){1==t.code&&t.data&&(e.currentNum=t.data.Received||0,e.getText.text="已领取（"+e.currentNum+"/5）",e.currentNum>=5&&(e.getBtn.texture=RES.getRes("btn_receive_03_png")),e.status=t.data.status,1==t.data.status||(2==t.data.status?(e.state.visible=!0,e.getBtn.texture=RES.getRes("btn_present_02_png"),e.numText.visible=!0):3==t.data.status?e.getBtn.texture=RES.getRes("btn_receive_03_png"):e.getBtn.texture=RES.getRes("btn_receive_out_png")))})},t.prototype.getFun=function(){var e=this;if(1==this.status){var t={uid:userDataMaster.sourceEnergy.uid,be_invitation_uid:userDataMaster.getMyInfo.uid};ServiceMaster.post(ServiceMaster.getEnergyDo,t,function(t){if(1==t.code&&t.data){e.currentNum++,e.getText.text="已领取（"+e.currentNum+"/5）",e.state.visible=!0,e.numText.visible=!0;var r=userDataMaster.myGold+100;userDataMaster.myGold=r,e.status=2,e.getBtn.texture=RES.getRes("btn_present_02_png")}})}else 2==this.status&&CallbackMaster.openShare(null,!1,"&type=energy&day="+this.day+"&suid="+this.suid,1)},t.prototype.closeFun=function(){this.parent.removeChild(this),userDataMaster.sourceEnergy={uid:0,day:""}},t}(eui.Component);__reflect(getEnergyModal.prototype,"getEnergyModal",["eui.UIComponent","egret.DisplayObject"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,r){function i(i){t.call(r,i,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?i(n):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return DeviceMaster.init(this.stage.stageWidth,this.stage.stageHeight),userDataMaster.init(),e=platform.getLaunchOptionsSync(),e&&e.query&&e.query.uid&&(userDataMaster.shareUid=e.query.uid,e.query.type&&"energy"==e.query.type&&(userDataMaster.sourceEnergy.uid=e.query.suid||e.query.uid,userDataMaster.sourceEnergy.day=e.query.day)),[4,this.loadResource()];case 1:return r.sent(),t=this,setTimeout(function(){t.createGameScene()},500),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("loading")];case 2:return i.sent(),e=new LoadingUI(this.stage.stageHeight),this.stage.addChild(e),[4,this.loadTheme()];case 3:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 4:return i.sent(),t=this,setTimeout(function(){t.stage.removeChild(e)},500),[3,6];case 5:return r=i.sent(),console.error(r),[3,6];case 6:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,r){var i=new eui.Theme("resource/default.thm.json",e.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){AdMaster.init(),soundMaster.init(),CallbackMaster.init(),movieMaster.init(),this.addChild(new startScene),t.scene=this.stage,platform.onShareAppMessage({})},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e);return t.texture=r,t},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){this.openDataContext={createDisplayObject:function(e,t,r){},postMessage:function(e){}}}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{code:""}]})})},e.prototype.onShareAppMessage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.shareAppMessage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.createUserInfoButton=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.vibrateShort=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.vibrateLong=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.navigateToMiniProgram=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.setUserCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getUserCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.createRewardedVideoAd=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.createBannerAd=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getSystemInfoSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{screenWidth:750,screenHeight:1334}]})})},e.prototype.setStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.removeStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.onShow=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return t={scene:"",query:{},shareTicket:"",referrerInfo:{appId:"",extraData:{type:"openMiniApp",openMiniAppId:""}}},e&&e(t),[2]})})},e.prototype.offShow=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.onHide=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.offHide=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.previewImage=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.exitMiniProgram=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.showModal=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.setClipboardData=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getLaunchOptionsSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,r,i){function n(e){t.call(i,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),r.call(i))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,r){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(i,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var d=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(i,generateJSON.paths[e])},this):RES.getResByUrl(d,function(r){window.JSONParseClass.setData(r),egret.callLater(function(){t.call(i,generateJSON.paths[e])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var buildingCom=function(){function e(e,t){this.type=0,this.haveHit=!1,this.factor=50,this.adaptation=0,this.type=e,this.adaptation=t}return e.prototype.init=function(e,t){void 0===t&&(t=14);var r=this,i=e.width/r.factor,n=new p2.Box({width:i,height:11.1}),a=new p2.Body({mass:500,gravityScale:0,type:p2.Body.KINEMATIC}),o=r.createBitmapByName(e.name);if(o.name=e.name,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.x=o.width/2,o.y=o.height/2,o.scaleX=.8,o.scaleY=.8,0==r.type)a.position=[7.5,6+r.adaptation],o.texture=RES.getRes(e.name+"1_png");else if(1==r.type){var s=Math.random()>.9?2*Math.random():2*-Math.random();a.position=[5+s,t+r.adaptation]}else{var s=Math.random()>.9?2*-Math.random():2*Math.random();a.position=[10+s,t+r.adaptation]}var d=new p2.Box({width:.92,height:6.26,material:new p2.Material(2)}),u=r.createBitmapByName("lightning");u.x=u.width/2,u.y=-n.height*r.factor/2,u.anchorOffsetX=u.width/2,u.height=0,u.rotation=180,a.displays=[o,u],a.addShape(n),a.addShape(d),this.boxBody=a},e.prototype.unpdateBuilding=function(e,t){void 0===t&&(t=14);var r=this;if(r.type=e,r.haveHit=!1,r.boxBody.displays[0].scaleX=.8,r.boxBody.displays[0].scaleY=.8,r.boxBody.displays[0].texture=RES.getRes(r.boxBody.displays[0].name+"2_png"),1==r.type){var i=Math.random()>.9?2*Math.random():2*-Math.random();r.boxBody.position=[5+i,t+r.adaptation]}else{var i=Math.random()>.9?2*-Math.random():2*Math.random();r.boxBody.position=[10+i,t+r.adaptation]}r.boxBody.displays[1].height=0},e.prototype.updateTexture=function(e){this.boxBody.displays[0].texture=RES.getRes(e+"_png")},e.prototype.afterHit=function(e,t,r,i){var n=this.boxBody;if(n.displays[0].scaleX+=.005,n.position[1]<-4){e.removeBody(n),n.displays[0]&&n.displays[0].parent&&n.displays[0].parent.removeChild(n.displays[0]),n.displays[1]&&n.displays[1].parent&&n.displays[1].parent.removeChild(n.displays[1]);var a=r.shift();t[a.boxBody.displays[0].name].push(a),i>0&&i--}},e.prototype.changeScale=function(e,t){var r=this.boxBody;r.displays[0].scaleX<1&&(r.displays[0].scaleX+=.001*e/t,r.displays[0].scaleY+=.001*e/t,r.velocity[1]=-2)},e.prototype.removeBuilding=function(){},e.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e+"2_png");return t.texture=r,t},e}();__reflect(buildingCom.prototype,"buildingCom"),window.buildingCom=buildingCom;var colorBgCom=function(e){function t(t){void 0===t&&(t=1);var r=e.call(this)||this;return r.currentTheme=1,r.currentTheme=t,r}return __extends(t,e),t.getInstance=function(e){return void 0===e&&(e=1),t.shared||(t.shared=new t(e)),t.shared},t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){t.stageHeight=this.stage.stageHeight,this.addChild(t.bgLinear),this.changeTheme(this.currentTheme)},t.prototype.changeTheme=function(e){var r=t.stageHeight,i=randomTheme.getInstance().degreeThemeArr[e-1];t.bgLinear.graphics.clear();var n=t.bgLinear.matrix;n.createGradientBox(375,r/2,Math.PI/2,187.5,r/4),t.bgLinear.graphics.beginGradientFill(egret.GradientType.LINEAR,[i.begin,i.end],[1,1],[0,255],n),t.bgLinear.graphics.drawRect(0,0,750,r),t.bgLinear.graphics.endFill()},t.bgLinear=new egret.Sprite,t.stageHeight=1334,t}(eui.Component);__reflect(colorBgCom.prototype,"colorBgCom",["eui.UIComponent","egret.DisplayObject"]),window.colorBgCom=colorBgCom;var randomTheme=function(){function e(e){this.themeArr=[{index:1,num:15,score:52,energy:2,width:300,tw:300,th:18,left:156,top:55,name:"img_castle_a",begin:8011715,end:3159693},{index:5,num:30,score:101,energy:5,width:300,tw:270,th:45,left:155,top:72,name:"img_castle_e",begin:13261641,end:9384500},{index:8,num:25,score:101,energy:5,width:300,tw:300,th:18,left:160,top:55,name:"img_castle_h",begin:16295421,end:11703807},{index:9,num:20,score:101,energy:5,width:300,tw:245,th:30,left:156,top:50,name:"img_castle_i",begin:15956581,end:16766118},{index:10,num:15,score:101,energy:5,width:300,tw:288,th:0,left:154,top:30,name:"img_castle_j",begin:13695743,end:12899306},{index:2,num:20,score:64,energy:3,width:250,tw:250,th:12,left:130,top:55,name:"img_castle_b",begin:4865964,end:1649775},{index:3,num:30,score:76,energy:4,width:250,tw:205,th:12,left:130,top:45,name:"img_castle_c",begin:11263877,end:3984772},{index:6,num:25,score:101,energy:5,width:250,tw:250,th:20,left:130,top:65,name:"img_castle_f",begin:15980417,end:14643794},{index:4,num:25,score:88,energy:5,width:250,tw:250,th:0,left:118,top:33,name:"img_castle_d",begin:10435696,end:6233178},{index:7,num:30,score:101,energy:5,width:250,tw:160,th:15,left:132,top:35,name:"img_castle_g",begin:16754592,end:16020588}],this.scoreInit=52,this.degreeArr=[{degree:0,scene:2,num:15,energy:8},{degree:1,scene:3,num:15,energy:8},{degree:2,scene:4,num:20,energy:9},{degree:3,scene:5,num:20,energy:9},{degree:4,scene:6,num:20,energy:10},{degree:5,scene:7,num:20,energy:10},{degree:6,scene:8,num:20,energy:11},{degree:7,scene:9,num:20,energy:11},{degree:8,scene:10,num:20,energy:13},{degree:9,scene:10,num:20,energy:15},{degree:10,scene:10,num:20,energy:20}],this.degreeThemeArr=[],this.degree=0,this.degree=e,this.degreeItem=this.degreeArr[e]}return e.getInstance=function(t){return void 0===t&&(t=1),e.shared||(e.shared=new e(t)),e.shared},e.prototype.init=function(t){void 0===t&&(t=null);for(var r=this,i=[],n=this.themeArr,a=n.length,o=0,s=r.degreeItem.scene;s>o;o++){var d=Math.floor(Math.random()*a);i.push(n[d]),n.splice(d,1),a--}e.getInstance().degreeThemeArr=i,t&&t()},e.prototype.getScore=function(e){return 4>e?this.scoreInit+12*(e-1):this.scoreInit+36},e}();__reflect(randomTheme.prototype,"randomTheme"),window.randomTheme=randomTheme;var spiritCom=function(){function e(){}return e.prototype.init=function(e,t,r){void 0===r&&(r=null);var i=new p2.Box({width:3.2,height:3.2});this.bee=new p2.Body({mass:5e3,position:[7.5,26+t]}),this.bee.collisionResponse=!1,this.bee.addShape(i);var n=new egret.Bitmap,a=RES.getRes("img_elf_"+e+"2_png");n.texture=a,n.width=160,n.height=160,n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,this.bee.displays=[n],r&&r(this.bee)},e}();__reflect(spiritCom.prototype,"spiritCom"),window.spiritCom=spiritCom;var AdMaster=function(){function e(){}return e.getInstance=function(){return e.shared||(e.shared=new e),e.shared},e.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return t=this,e.INIT_STATUS=1,[4,this.list()];case 1:return r.sent(),[2]}})})},e.list=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,ServiceMaster.post(ServiceMaster.getConfig,{},function(t){1===parseInt(t.code)&&t.data&&(2==t.data.edition_2&&(CallbackMaster.hasChecked=!0),void 0!==t.data.banner_id&&null!=t.data.banner_id&&t.data.banner_id.length>0&&(e.banner=t.data.banner_id,e.hasBanner=!0,e.randomCacheBannerAd()),void 0!==t.data.video_id&&null!=t.data.video_id&&t.data.video_id.length>0&&(e.video=t.data.video_id,e.hasVideo=!0,e.randomCacheVideoAd()),e.INIT_STATUS=2)},function(t){e.INIT_STATUS=3})];case 1:return t.sent(),[2]}})})},e.randomCacheVideoAd=function(){e.video&&(e.cacheVideoAd=platform.createRewardedVideoAd(e.video[Math.floor(Math.random()*e.video.length)]),e.cacheVideoAd.onError(function(t){console.log(1,t),e.noVideo=!0}))},e.randomCacheBannerAd=function(){e.banner&&(e.cacheBannerAd=platform.createBannerAd(e.banner[Math.floor(Math.random()*e.banner.length)],{}),e.cacheBannerAd.onError(function(e){console.log(e)}))},e.openVideoAd=function(t,r){void 0===t&&(t=null),void 0===r&&(r=null),e.cacheVideoAd&&(e.cacheVideoAd.show().then(function(){})["catch"](function(t){e.cacheVideoAd.load(),r(t)}),e.cacheVideoAd.onClose(t))},e.openBannerAd=function(t){void 0===t&&(t={});var r=setInterval(function(){e.INIT_STATUS>1&&(e._openBannerAd(t),clearInterval(r))},50)},e._openBannerAd=function(t){e.cacheBannerAd&&(e.cacheBannerAd.style.width=DeviceMaster.getX(t.width)||DeviceMaster.screenWidth,e.cacheBannerAd.style.left=DeviceMaster.getX(t.left)||0,e.cacheBannerAd.style.top=DeviceMaster.getY(t.top)||0,t.height&&(e.cacheBannerAd.style.height=DeviceMaster.getY(t.height)),e.cacheBannerAd.show(),e.cacheBannerAd.onResize(function(t){var r=t.height*DeviceMaster.screenWidth/t.width;e.cacheBannerAd.style.width=DeviceMaster.screenWidth,e.cacheBannerAd.style.top=DeviceMaster.screenHeight-r,DeviceMaster.stageHeight>1600&&(e.cacheBannerAd.style.top-=40)}))},e.closeBannerAd=function(){e.cacheBannerAd&&e.cacheBannerAd.hide()},e.useVideo=function(t,r){if(void 0===t&&(t=null),void 0===r&&(r=null),e.cacheVideoAd)if(e.noVideo)platform.showModal({title:"温馨提示",content:"今日视频次数已经用完，请明日再来哦~"});else{var i=!0;e.openVideoAd(function(e){(e&&e.isEnded||void 0===e)&&i&&t&&t(),i=!1})}else r&&r()},e.banner=[],e.hasBanner=!1,e.video=[],e.hasVideo=!1,e.cacheVideoAd=null,e.haveMoreVideo=!0,e.cacheBannerAd=null,e.INIT_STATUS=0,e.closeSuccess=null,e.initClose=!1,e.noVideo=!1,e}();__reflect(AdMaster.prototype,"AdMaster"),window.AdMaster=AdMaster;var CallbackMaster=function(){function e(){}return e.init=function(){var t={query:"type=newUser&uid="+userDataMaster.getMyInfo.uid};platform.onShareAppMessage(t),platform.onShow(function(t){if(t&&t.query&&t.query.uid&&(userDataMaster.shareUid=t.query.uid,t.query.type&&"energy"==t.query.type&&(userDataMaster.sourceEnergy.uid=t.query.suid||t.query.uid,userDataMaster.sourceEnergy.day=t.query.day,Main.scene&&Main.scene.getChildAt(0)&&Main.scene.getChildAt(0).addChild(new getEnergyModal(userDataMaster.sourceEnergy.uid,userDataMaster.sourceEnergy.day)))),(new Date).getTime()-e.shareTime>3e3)e.shareSuc&&e.shareSuc(),e.saveShareSuc=null,e.shareFailText="分享到不同的群才能获得奖励哦~";else{e.saveShareSuc=e.shareSuc;var r={title:"温馨提示",content:e.shareFailText,confirmText:"再试一次",success:function(t){t.confirm?e.openShare(e.saveShareSuc):e.shareFailText="分享到不同的群才能获得奖励哦~"}};platform.showModal(r)}e.shareSuc=null}),platform.onHide(function(){soundMaster.soundChannel&&soundMaster.soundChannel.stop(),e.onHideFun&&e.onHideFun();var t=JSON.stringify(userDataMaster.MyCats),r=JSON.stringify(userDataMaster.myTravels),i={runCat:userDataMaster.runCat,dayEnergy:userDataMaster.dayEnergy,dayTry:userDataMaster.dayTry,travelList:userDataMaster.travelList,dayVideoEnergy:userDataMaster.dayVideoEnergy,degree:userDataMaster.degree},n={uid:userDataMaster.getMyInfo.uid,energy:userDataMaster.myGold,spirit_data:t,mark_data:r,info:JSON.stringify(i)};ServiceMaster.post(ServiceMaster.setGameData,n,function(e){1==e.code&&e.data})})},e.openShare=function(t,r,i,n){if(void 0===t&&(t=null),void 0===r&&(r=!0),void 0===i&&(i=""),void 0===n&&(n=0),e.hasChecked){var a=e.shareInfo[0];0==n?a=e.shareInfo[Math.floor(2*Math.random())]:(a.imageUrl=e.shareInfo[2].imageUrl,a.title=(userDataMaster.myInfo.nickName||"")+e.shareInfo[2].title);var o={title:a.title,imageUrl:a.imageUrl,query:"uid="+userDataMaster.getMyInfo.uid+i};platform.shareAppMessage(o),e.shareTime=r?(new Date).getTime():0,e.shareSuc=t}},e.openHide=function(t){void 0===t&&(t=null),e.onHideFun=t},e.recommandClick=function(e,t){void 0===e&&(e=1);var r=userDataMaster.getMyInfo.uid,i={id:t.id,uid:r,appid:t.appid,type:e,module_id:t.module_id,module_ext_id:t.module_ext_id};ServiceMaster.post(ServiceMaster.gameClick,i,function(e){1==e.code&&e.data})},e.shareSuc=null,e.shareTime=0,e.onHideFun=null,e.hasChecked=!1,e.saveShareSuc=null,e.shareFailText="分享到不同的群才能获得奖励哦~",e.shareInfo=[{imageUrl:"https://lixi.h5.app81.com/minigame/game_lixi/share_img/share_1.jpg",title:"球球精灵要饿坏了，快点来喂养吧~"},{imageUrl:"https://lixi.h5.app81.com/minigame/game_lixi/share_img/share_2.jpg",title:"我就是宇宙第一酷，酷跑酷跑一起奔跑吧！"},{imageUrl:"https://lixi.h5.app81.com/minigame/game_lixi/share_img/share_3.jpg",title:"给你采集了一大袋能量果，快来领一份吧~"}],e}();__reflect(CallbackMaster.prototype,"CallbackMaster");var DeviceMaster=function(){function e(){}return e.init=function(t,r){void 0===t&&(t=750),void 0===r&&(r=1334),e.stageWidth=t,e.stageHeight=r,e.SYSTEM_INFO=platform.getSystemInfoSync(),e.model=e.SYSTEM_INFO.model,e.system=e.SYSTEM_INFO.system,e.screenWidth=e.SYSTEM_INFO.screenWidth,e.screenHeight=e.SYSTEM_INFO.screenHeight,e.scaleWidth=e.screenWidth/e.stageWidth,e.scaleHeight=e.screenHeight/e.stageHeight,e.windowWidth=2*e.SYSTEM_INFO.windowWidth,e.windowHeight=2*e.SYSTEM_INFO.windowHeight},e.getX=function(t){return void 0===t&&(t=0),t*e.scaleWidth},e.getY=function(t){return void 0===t&&(t=0),t*e.scaleHeight},e.screenWidth=750,e.screenHeight=1334,e.windowWidth=750,e.windowHeight=1334,e.stageWidth=750,e.stageHeight=1334,e.scaleWidth=1,e.scaleHeight=1,e}();__reflect(DeviceMaster.prototype,"DeviceMaster"),window.DeviceMaster=DeviceMaster;var movieMaster=function(){function e(){}return e.init=function(){var t=RES.getRes("ball_travel_gif_json"),r=RES.getRes("ball_travel_gif_png");e.mcFactory=new egret.MovieClipDataFactory(t,r)},e.getGif=function(t){var r=new egret.MovieClip(e.mcFactory.generateMovieClipData(t));return r},e}();__reflect(movieMaster.prototype,"movieMaster"),window.movieMaster=movieMaster;var ServiceMaster=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.objSort=function(e){for(var t=Object.keys(e).sort(),r={},i=0;i<t.length;i++)r[t[i]]=e[t[i]];return r},e.createToken=function(t){"undefined"!=typeof t.token&&delete t.token;var r=e.objSort(t),i="";for(var n in r)i+=i?"&":"",i+=n+"="+r[n];return i+="!@#$%^&*",(new md5).hex_md5(i)},e.request=function(e,t,r,i,n,a){void 0===t&&(t="POST"),void 0===r&&(r={}),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null);var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(e,egret.HttpMethod[t]),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),r.token=this.createToken(r),o.send(this.obj2str(r,!0)),o.addEventListener(egret.Event.COMPLETE,function(){i&&i(JSON.parse(o.response))},this),n&&o.addEventListener(egret.IOErrorEvent.IO_ERROR,n,this),a&&o.addEventListener(egret.ProgressEvent.PROGRESS,a,this)},e.post=function(t,r,i,n,a){void 0===r&&(r={}),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),e.request(e.DOMAIN+t,e.METHOD_POST,r,i,n,a)},e.get=function(t,r,i,n,a){void 0===r&&(r={}),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),e.request(e.DOMAIN+t,e.METHOD_GET,r,i,n,a)},e.obj2str=function(e,t){void 0===t&&(t=!1);var r="";for(var i in e)r+=!t||"encryptedData"!=i&&"iv"!=i?"&"+i+"="+e[i]:"&"+i+"="+encodeURI(e[i]).replace(/\+/g,"%2B");return r.substring(1)},e.DOMAIN="https://newbox.0e3.cn/gball",e.METHOD_POST="POST",e.METHOD_GET="GET",e.logins="/user/logins",e.updateUser="/user/updateUser",e.getGameList="/other/getGameList",e.getConfig="/other/getConfig",e.getScore="/user/getScore",e.rank_world="/user/rank_world",e.gameClick="/other/gameClick",e.getAssistanceList="/other/getAssistanceList",e.receiveAssistance="/other/receiveAssistance",e.getEnergy="/other/getEnergy",e.getEnergyDo="/other/getEnergyDo",e.getGameData="/user/getGameData",e.setGameData="/user/setGameData",e}();__reflect(ServiceMaster.prototype,"ServiceMaster"),window.ServiceMaster=ServiceMaster;var soundMaster=function(){function e(){}return e.init=function(){for(var t=function(t,r){RES.getResByUrl(e.songArr[t].path,function(r){e.songArr[t].sound=r})},r=0,i=e.songArr.length;i>r;r++)t(r,i)},e.playSongMusic=function(t){void 0===t&&(t=0),e.songArr[t].sound&&e.isMusic&&(e.soundChannel=e.songArr[t].sound.play(0,-1))},e.stopSongMusic=function(){e.soundChannel&&e.soundChannel.stop()},e.playSingleMusic=function(t){e[t]&&e.isMusic&&e[t].play(0,1)},Object.defineProperty(e,"isMusic",{get:function(){return e.music},set:function(t){t?e.music=!0:e.music=!1},enumerable:!0,configurable:!0}),e.songArr=[{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_1.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_1.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_2.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_3.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_4.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_5.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_6.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_7.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_8.mp3",sound:null},{path:"https://lixi.h5.app81.com/minigame/game_lixi/ball_music/music_9.mp3",sound:null}],e.music=!0,e}();__reflect(soundMaster.prototype,"soundMaster");var userDataMaster=function(){function e(){}return e.getInstance=function(){return e.shared||(e.shared=new e),e.shared},e.init=function(){var t=[e.gold,e.cats,e.travels,e.runCat];e.myCollection=new eui.ArrayCollection(t),e.login(),e.getRecommand(),e.getGameData()},e.getGameData=function(){var t=e.myInfo.uid;e.requestTimes++,0!=t?ServiceMaster.post(ServiceMaster.getGameData,{uid:t},function(t){if(1==t.code&&t.data){var r=t.data;if(r.energy>0&&(e.myGold=r.energy),r.high_score&&(e.bestScore=r.high_score),r.spirit_data.length>0&&(e.MyCats=JSON.parse(r.spirit_data)),r.mark_data.length>0&&(e.myTravels=JSON.parse(r.mark_data)),r.info.length>0){var i=JSON.parse(r.info);i.runCat>=0&&(e.myRunCat=i.runCat),i.dayEnergy&&(e.dayEnergy=i.dayEnergy),i.dayTry&&(e.dayTry=i.dayTry),i.travelList&&(e.travelList=i.travelList),i.dayVideoEnergy&&(e.dayVideoEnergy=i.dayVideoEnergy),i.degree&&(e.degree=i.degree)}}}):e.requestTimes<5&&setTimeout(function(){e.getGameData()},1e3)},e.getRecommand=function(){ServiceMaster.post(ServiceMaster.getGameList,{},function(t){1==t.code&&t.data&&(e.recommand=t.data)})},Object.defineProperty(e,"myGold",{get:function(){return e.gold},set:function(t){e.gold=t,e.myCollection.replaceItemAt(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MyCats",{get:function(){return e.cats},set:function(t){e.cats=t,e.myCollection.replaceItemAt(t,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"myRunCat",{set:function(t){e.runCat=t,e.myCollection.replaceItemAt(t,3)},enumerable:!0,configurable:!0}),e.setCat=function(t,r){e.cats[t]=r,e.myCollection.replaceItemAt(e.cats,1)},Object.defineProperty(e,"myTravels",{get:function(){return e.travels},set:function(t){e.travels=t,e.myCollection.replaceItemAt(t,2)},enumerable:!0,configurable:!0}),e.setTravel=function(t,r){e.travels[t]=r,e.myCollection.replaceItemAt(e.travels,2)},Object.defineProperty(e,"getMyInfo",{get:function(){return e.myInfo},set:function(t){e.myInfo=t},enumerable:!0,configurable:!0}),e.getUserInfo=function(e){},Object.defineProperty(e,"todayEnergy",{get:function(){return e.dayEnergy.day==e.getToday()?e.dayEnergy.num:(e.dayEnergy={day:e.getToday(),num:0},0)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"todayTry",{get:function(){return e.dayTry==e.getToday()?!1:!0},enumerable:!0,configurable:!0}),e.updateTodayTry=function(){e.dayTry=e.getToday()},Object.defineProperty(e,"todayVideoEnergy",{get:function(){return e.dayVideoEnergy.day==e.getToday()?e.dayVideoEnergy.num:(e.dayVideoEnergy={day:e.getToday(),num:0},0)},enumerable:!0,configurable:!0}),e.createLoginBtn=function(t,r,i,n){return __awaiter(this,void 0,void 0,function(){var a,o,s;return __generator(this,function(d){switch(d.label){case 0:return a=this,o=DeviceMaster.screenWidth/750,t*=o,r*=o,i*=o,n*=o,s=e,[4,platform.createUserInfoButton({type:"image",image:"../../resource/assets/imgData/img_yxbj.png",style:{left:t,top:r,width:i,height:n,lineHeight:40,backgroundColor:"#ff0000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}})];case 1:return s.userInfoBtn=d.sent(),e.userInfoBtn.onTap(function(t){e.updateUser(t)}),[2]}})})},e.updateUser=function(t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){var r,i;return __generator(this,function(n){return r=t.userInfo,e.myInfo.nickName=r.nickName,e.myInfo.avatarUrl=r.avatarUrl,i={uid:e.getMyInfo.uid,nickName:r.nickName,gender:r.gender,avatarUrl:r.avatarUrl},ServiceMaster.post(ServiceMaster.updateUser,i,function(t){1===parseInt(t.code)&&t.data&&(e.userInfoBtn&&e.userInfoBtn.destroy(),e.loginCallback&&e.loginCallback(),e.loginCallback=null)
}),[2]})})},e.login=function(t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(i){switch(i.label){case 0:return[4,platform.login()];case 1:return t=i.sent(),r={code:t.code},e.shareUid>0&&(r.pid=e.shareUid),ServiceMaster.post(ServiceMaster.logins,r,function(t){1===parseInt(t.code)&&t.data&&(e.getMyInfo=t.data,platform.openDataContext.postMessage({type:"openid",openid:t.data.openId}),e.getUserInfo(t.data.uid))}),[2]}})})},e.getToday=function(){var e=new Date,t=e.getMonth()+1>9?e.getMonth()+1+"":"0"+(e.getMonth()+1),r=e.getDate()>9?e.getDate()+"":"0"+e.getDate();return e.getFullYear()+"-"+t+"-"+r},e.myInfo={uid:0,openId:"",is_new_user:!0,nickName:"",avatarUrl:""},e.gold=0,e.cats=[{id:1,name:"白白球",state:!0,process:1e3,target:1e3,belong:[0,1,2],des:"第一只拥有的精灵，洁白无一物",music:"《水晶》"},{id:2,name:"摇滚球",state:!1,process:0,target:2e4,belong:[3,5,6],des:"浑身散发魔性，带来的音乐也是酷酷风",music:"《幽默》"},{id:3,name:"水灵球",state:!1,process:0,target:15e3,belong:[7,8,10],des:"蜻蜓点水般的灵动，似风入海洋",music:"《沙滩》"},{id:4,name:"跑酷球",state:!1,process:0,target:1e4,belong:[11,12,13],des:"天生顽皮，似乎喂养了很多能量果",music:"《超越》"},{id:5,name:"火火球",state:!1,process:0,target:0,belong:[15,16,17],des:"别看它小小的身体，却有大大的能量",music:"《希望》"},{id:6,name:"黑洞球",state:!1,process:0,target:8e3,belong:[18,20,21],des:"想法经常出乎意料，常常让你冒冷",music:"《迷宫》"},{id:7,name:"爆破球",state:!1,process:0,target:6e3,belong:[22,23,25],des:"拥有一秒燃爆森林的力量",music:"《时空》"},{id:8,name:"旋风球",state:!1,process:0,target:5e3,belong:[26,27,28],des:"可以带着风飞舞，跑遍世界角落",music:"《海洋》"},{id:9,name:"懒懒球",state:!1,process:0,target:3e3,belong:[30,31,32],des:"找不出第二只比懒懒球还懒的精灵了",music:"《星辰》"}],e.travels=[{index:0,id:0,name:"月之桥",state:0},{index:1,id:1,name:"白玉盘",state:0},{index:2,id:2,name:"瑶台镜",state:0},{index:3,id:3,name:"青云端",state:0},{index:4,id:-1,name:"",state:0},{index:5,id:4,name:"仙人足",state:0},{index:6,id:5,name:"树团团",state:0},{index:7,id:6,name:"白兔岛",state:0},{index:8,id:7,name:"蚀圆影",state:0},{index:9,id:-1,name:"",state:0},{index:10,id:8,name:"明夜残",state:0},{index:11,id:9,name:"落九乌",state:0},{index:12,id:10,name:"升日月",state:0},{index:13,id:11,name:"花落肩",state:0},{index:14,id:-1,name:"",state:0},{index:15,id:12,name:"三生烟",state:0},{index:16,id:13,name:"清晨迷",state:0},{index:17,id:14,name:"尘滴落",state:0},{index:18,id:15,name:"四木湖",state:0},{index:19,id:-1,name:"",state:0},{index:20,id:16,name:"蔷薇轮",state:0},{index:21,id:17,name:"嫩绿生",state:0},{index:22,id:18,name:"清脆盘",state:0},{index:23,id:19,name:"四季空",state:0},{index:24,id:-1,name:"",state:0},{index:25,id:20,name:"木偶屋",state:0},{index:26,id:21,name:"镜之藤",state:0},{index:27,id:22,name:"缠上月",state:0},{index:28,id:23,name:"莲渔舟",state:0},{index:29,id:-1,name:"",state:0},{index:30,id:24,name:"光懒懒",state:0},{index:31,id:25,name:"万颗紫",state:0},{index:32,id:26,name:"七彩云",state:0},{index:33,id:-1,name:"",state:0}],e.travelList=[],e.dayEnergy={day:"",num:0},e.shareUid=0,e.sourceEnergy={uid:0,day:""},e.bestScore=0,e.haveNickName=!1,e.runCat=0,e.requestTimes=0,e.dayTry="",e.dayVideoEnergy={day:"",num:0},e.loginCallback=null,e.degree=0,e}();__reflect(userDataMaster.prototype,"userDataMaster"),window.userDataMaster=userDataMaster;var ballItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.image.mask=this.imgMask,this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},this)},t.prototype.dataChanged=function(){this.title.text=this.data.name,this.image.source=this.data.image||"",this.image.mask=this.imgMask},t}(eui.ItemRenderer);__reflect(ballItem.prototype,"ballItem",["eui.UIComponent","egret.DisplayObject"]),window.ballItem=ballItem;var dayEnergy=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;switch(egret.Tween.get(this.body).to({scaleX:1,scaleY:1},300,egret.Ease.backOut),userDataMaster.todayEnergy){case 0:break;case 1:e.getBtn.texture=RES.getRes("btn_receive_video_png");break;case 2:e.getBtn.texture=RES.getRes("btn_receive_04_png")}egret.Tween.get(this.img,{loop:!0}).to({y:262},600).to({y:300},600),e.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getFun,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareFun,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this)},t.prototype.getFun=function(){function e(e){userDataMaster.dayEnergy.num++,userDataMaster.myGold+=100,t.addChild(new getSuccess(-1,"x 100")),t.getBtn.texture=RES.getRes("btn_receive_"+e+"_png")}var t=this,r=userDataMaster.todayEnergy;0==r?e("video"):1==r&&AdMaster.useVideo(function(){e("04")},function(){CallbackMaster.openShare(function(){e("04")})})},t.prototype.shareFun=function(){CallbackMaster.openShare(null,!1,"&type=energy&day="+userDataMaster.getToday(),1),setTimeout(function(){platform.showModal({title:"温馨提示",content:"从分享链接点进去，就能获得一份能量果~"})},500)},t.prototype.closeFun=function(){var e=this;egret.Tween.get(this.body).to({scaleX:2,scaleY:2,alpha:0},200).call(function(){e.parent.removeChild(e)})},t}(eui.Component);__reflect(dayEnergy.prototype,"dayEnergy",["eui.UIComponent","egret.DisplayObject"]);var friendHelp=function(e){function t(){var t=e.call(this)||this;return t.list=[],t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;e.getList(),egret.Tween.get(this.body).to({scaleX:1,scaleY:1},300,egret.Ease.backOut),this.getBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getFun,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),userDataMaster.cats[8].state&&(e.getBtn.texture=RES.getRes("btn_have_unlock_png")),!userDataMaster.cats[8].state&&e.list.length>=6&&(e.getBtn.texture=RES.getRes("btn_unlocking_png")),this.fireBall=movieMaster.getGif("fire_ball"),this.fireBall.y=297,this.fireBall.x=245,this.body.addChild(this.fireBall),this.fireBall.gotoAndPlay(0,-1)},t.prototype.getList=function(){var e=this,t=this,r={uid:userDataMaster.getMyInfo.uid||0};ServiceMaster.post(ServiceMaster.getAssistanceList,r,function(r){if(1==r.code&&r.data){t.list=r.data.list;for(var i=function(r,i){t["friend_"+r].source=t.list[r].avatarUrl,t["friend_"+r].mask=t["mask_"+r],1==t.list[r].status?(t["get_"+r].visible=!0,t["get_"+r].addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.getEnergyFun(r)},e)):(t["icon_"+r].visible=!1,t["text_"+r].visible=!1)},n=0,a=r.data.total;a>n;n++)i(n,a)}})},t.prototype.getEnergyFun=function(e){var t=this,r={id:t.list[e].id,uid:userDataMaster.getMyInfo.uid};ServiceMaster.post(ServiceMaster.receiveAssistance,r,function(r){if(1==r.code&&r.data){var i=userDataMaster.myGold;i+=150,userDataMaster.myGold=i,t["get_"+e].visible=!1,t["icon_"+e].visible=!1,t["text_"+e].visible=!1,t.list[e].status=2,t.addChild(new getSuccess(-1,"x 150"))}})},t.prototype.getFun=function(){var e=this;if(e.list.length>=6){if(!userDataMaster.cats[8].state){var t=userDataMaster.cats[8];t.state=!0,userDataMaster.setCat(8,t),e.getBtn.texture=RES.getRes("btn_have_unlock_png"),e.addChild(new getSuccess(4,"火火球"))}}else CallbackMaster.openShare(null,!1),setTimeout(function(){platform.showModal({title:"温馨提示",content:"新好友加入，你就能获得能量果和火火球~"})},500)},t.prototype.closeFun=function(){var e=this;egret.Tween.get(this.body).to({scaleX:2,scaleY:2,alpha:0},200).call(function(){e.parent.removeChild(e)})},t}(eui.Component);__reflect(friendHelp.prototype,"friendHelp",["eui.UIComponent","egret.DisplayObject"]);var LoadingUI=function(e){function t(t){void 0===t&&(t=1334);var r=e.call(this)||this;return r.stageHeight=1334,r.stageHeight=t,r.createView(),r}return __extends(t,e),t.prototype.createView=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r,i,n,a;return __generator(this,function(o){return e=this.stageHeight-1334,t=this.createBitmapByName("img_bg_loading_jpg"),t.height=this.stageHeight,this.addChild(t),r=this.createBitmapByName("img_text_loading_png"),r.x=(750-r.width)/2,r.y=194,this.addChild(r),i=this.createBitmapByName("img_bg_01_png"),i.x=75,i.y=1021+e,this.addChild(i),this.pro=this.createBitmapByName("img_bg_02_png"),this.pro.width=0,this.pro.x=84,this.pro.y=1030+e,this.addChild(this.pro),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=1074+e,this.textField.x=54,this.textField.width=100,this.textField.height=200,this.textField.size=30,this.textField.textColor=16777215,this.textField.bold=!0,n=new egret.TextField,this.addChild(n),n.y=1177+e,n.text="抵制不良游戏  拒绝盗版游戏  注意自我保护  谨防受骗上当",n.width=750,n.size=24,n.textColor=14401023,n.textAlign="center",a=new egret.TextField,this.addChild(a),a.y=1220+e,a.text="适度游戏益脑  沉迷游戏伤身  合理安排时间  享受健康生活",a.width=750,a.size=24,a.textColor=14401023,a.textAlign="center",[2]})})},t.prototype.onProgress=function(e,t){var r=Math.floor(e/t*100);this.pro.width=600*r/100,this.textField.text=r+"%",this.textField.x=54+this.pro.width},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e);return t.texture=r,t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var getSuccess=function(e){function t(t,r){void 0===t&&(t=-1);var i=e.call(this)||this;return i.type=-1,i.nameOrNum="",i.type=t,i.nameOrNum=r,i}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;egret.Tween.get(this.body).to({scaleX:1,scaleY:1},300,egret.Ease.backOut),this.word.text=this.nameOrNum,-1==this.type?this.type_1.visible=!0:(this.type_2.visible=!0,this.type_2.texture=RES.getRes("img_elf_"+this.type+"2_png"),this.title.texture=RES.getRes("img_tittle_05_png")),e.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareFun,this),e.ignoreBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ignoreFun,this),e.ignoreBtn.visible=!0},t.prototype.shareFun=function(){var e=this;CallbackMaster.openShare(function(){e.ignoreFun()},!1)},t.prototype.ignoreFun=function(){var e=this;egret.Tween.get(this.body).to({scaleX:2,scaleY:2,alpha:0},200).call(function(){e.parent.removeChild(e)})},t}(eui.Component);__reflect(getSuccess.prototype,"getSuccess",["eui.UIComponent","egret.DisplayObject"]);var grayBg=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.bg.width=this.stage.stageWidth,this.bg.height=this.stage.stageHeight},t}(eui.Component);__reflect(grayBg.prototype,"grayBg",["eui.UIComponent","egret.DisplayObject"]),window.grayBg=grayBg;var guideModal=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);__reflect(guideModal.prototype,"guideModal",["eui.UIComponent","egret.DisplayObject"]);var moreItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){CallbackMaster.recommandClick(1,e.data);var t=2;platform.navigateToMiniProgram({appId:e.data.appid,path:e.data.path,extraData:{},success:function(e){},fail:function(e){t=3},complete:function(){CallbackMaster.recommandClick(t,e.data)}})},this)},t.prototype.dataChanged=function(){this.title.text=this.data.name,this.image.source=this.data.image||""},t}(eui.ItemRenderer);__reflect(moreItem.prototype,"moreItem",["eui.UIComponent","egret.DisplayObject"]),window.moreItem=moreItem;var moreScroller=function(e){function t(){var t=e.call(this)||this;return t.scrTerval=null,t}return __extends(t,e),t.getInstance=function(){return t.shared||(t.shared=new t),t.shared},t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;setTimeout(function(){if(userDataMaster.recommand&&userDataMaster.recommand[1]&&userDataMaster.recommand[1].games){var t=userDataMaster.recommand[1].games;e.sourceArr=new eui.ArrayCollection(t),e.dataGroup=new eui.DataGroup,e.dataGroup.dataProvider=e.sourceArr,e.dataGroup.useVirtualLayout=!0;var r=new eui.VerticalLayout;r.gap=20,e.dataGroup.layout=r,e.dataGroup.itemRenderer=moreItem,e.dataGroup2=new eui.DataGroup,e.dataGroup2.dataProvider=e.sourceArr,e.dataGroup2.useVirtualLayout=!0;var i=new eui.VerticalLayout;i.gap=20,e.dataGroup2.layout=i,e.dataGroup2.itemRenderer=moreItem,e.moreGroup.height=150*t.length,e.moreGroup2.height=150*t.length,e.moreGroup.addChild(e.dataGroup),e.moreGroup2.addChild(e.dataGroup2),e.moreGroup2.y=e.moreGroup.height,e.moreScroller.scrollPolicyV="off",e.scrTerval=setInterval(function(){egret.Tween.get(e.moreGroup).to({y:e.moreGroup.y-450},1e3).wait(100).call(function(){e.moreGroup.y<=-e.moreGroup.height&&(e.moreGroup.y=e.moreGroup2.y+e.moreGroup2.height)}),egret.Tween.get(e.moreGroup2).to({y:e.moreGroup2.y-450},1e3).wait(100).call(function(){e.moreGroup2.y<=-e.moreGroup.height&&(e.moreGroup2.y=e.moreGroup.y+e.moreGroup.height)})},3e3)}},500)},t}(eui.Component);__reflect(moreScroller.prototype,"moreScroller",["eui.UIComponent","egret.DisplayObject"]),window.moreScroller=moreScroller;var myBalls=function(e){function t(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r.positionArr=[{index:0,x:375,y:303,scaleX:1,scaleY:1},{index:1,x:142,y:288,scaleX:.6,scaleY:.6},{index:2,x:90,y:235,scaleX:.5,scaleY:.5},{index:3,x:192,y:198,scaleX:.4,scaleY:.4},{index:4,x:305,y:180,scaleX:.3,scaleY:.3},{index:5,x:448,y:180,scaleX:.3,scaleY:.3},{index:6,x:557,y:198,scaleX:.4,scaleY:.4},{index:7,x:670,y:235,scaleX:.5,scaleY:.5},{index:8,x:612,y:288,scaleX:.6,scaleY:.6}],r.canMove=!0,r.position={x:0,y:0,time:0},r.currentBall=0,r.fireList=[],r.guideFeed=!1,r.guideFeed=t,r}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){for(var e=userDataMaster.cats,t=this.positionArr.length,r=t-1;r>=0;r--)this["img_"+r].texture=RES.getRes("img_elf_"+r+"2_png"),e[r].state||(this.guideFeed&&0==this.currentBall&&(this.currentBall=r),this.filterFun(this["img_"+r]));if(0!=this.currentBall)for(var i=this.currentBall,r=0,t=this.positionArr.length;t>r;r++){var n=r-i>=0?r-i:r-i+9;this["item_"+r].name="current_"+n,this.bodyGroup.setChildIndex(this["item_"+r],this.getIndex(n)),this["item_"+r].x=this.positionArr[n].x,this["item_"+r].y=this.positionArr[n].y,this["item_"+r].scaleX=this.positionArr[n].scaleX,this["item_"+r].scaleY=this.positionArr[n].scaleY}this.changeInfo(this.currentBall),this.bgImg.height=this.stage.stageHeight;var a=new egret.BlurFilter(4,4);this.processBar.filters=[a],this.goldText.text=userDataMaster.myGold+"",this.getFireList(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFun,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.endFun,this),this.homeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.homeFun,this),this.raiseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raiseFun,this),this.fireBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fireFun,this),this.addGold.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addGoldFun,this),userDataMaster.myCollection.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.updateData,this)},t.prototype.updateData=function(e){this.goldText.text=""+userDataMaster.gold},t.prototype.addGoldFun=function(){function e(e){userDataMaster.dayVideoEnergy.num++,userDataMaster.myGold+=e,t.addChild(new getSuccess(-1,"x "+e))}var t=this;switch(userDataMaster.todayVideoEnergy){case 0:CallbackMaster.openShare(function(){e(50)});break;case 1:AdMaster.useVideo(function(){e(100)},function(){CallbackMaster.openShare(function(){e(100)})});break;case 2:platform.showModal({title:"温馨提示",content:"今日次数已用完，明日再来"})}},t.prototype.getFireList=function(){var e=this,t={uid:userDataMaster.getMyInfo.uid||0};ServiceMaster.post(ServiceMaster.getAssistanceList,t,function(t){1==t.code&&t.data&&(e.fireList=t.data.list)})},t.prototype.filterFun=function(e,t){if(void 0===t&&(t=0),0==t){var r=[.3,.6,0,0,-300,.3,.6,0,0,-300,.3,.6,0,0,-300,0,0,0,1,0],i=new egret.ColorMatrixFilter(r);e.filters=[i]}else e.filters=[]},t.prototype.fireFun=function(){var e=this,t=4;if(userDataMaster.cats[t].state&&userDataMaster.runCat==t);else if(!userDataMaster.cats[t].state&&e.fireList.length>=6){var r=userDataMaster.cats[t];r.state=!0,userDataMaster.setCat(t,r),e.filterFun(e["img_"+t],1),e.fireBtn.texture=RES.getRes("btn_receive_10_png"),e.addChild(new getSuccess(4,"火火球"))}else userDataMaster.cats[t].state&&e.fireList.length>=6?(e.fireBtn.texture=RES.getRes("btn_receive_09_png"),userDataMaster.myRunCat=t):CallbackMaster.openShare(null,!1)},t.prototype.homeFun=function(){var e=this.parent;e.removeChild(this)},t.prototype.beginFun=function(e){this.position={x:e.stageX,y:e.stageY,time:egret.getTimer()}},t.prototype.endFun=function(e){var t=(egret.getTimer()-this.position.time,1);this.position.x-e.stageX>50?this.moveFun("right",t):e.stageX-this.position.x>50&&this.moveFun("left",t),this.position.x=0,this.position.time=0},t.prototype.moveFun=function(e,t){var r=this;if(void 0===e&&(e="left"),void 0===t&&(t=1),this.canMove){var i=this;this.canMove=!1;for(var n=function(n,o){var s=0;if(a["item_"+n].name){var d=a["item_"+n].name.slice(8);s="left"==e?d>0?parseInt(d)-1:8:8>d?parseInt(d)+1:0}else s="left"==e?n>0?n-1:8:8>n?n+1:0;0==s&&i.changeInfo(n),a["item_"+n].name="current_"+s;for(var u=function(e){a.bodyGroup.setChildIndex(a["item_"+n],a.getIndex(s)),egret.Tween.get(a["item_"+n]).wait(500/t*e).to({x:a.positionArr[s].x,y:a.positionArr[s].y,scaleX:a.positionArr[s].scaleX,scaleY:a.positionArr[s].scaleY},500/t).call(function(){8==n&&e==t-1&&(r.canMove=!0)})},c=0;t>c;c++)u(c)},a=this,o=0,s=this.positionArr.length;s>o;o++)n(o,s)}},t.prototype.getIndex=function(e){var t=0;switch(e){case 0:t=8;break;case 1:t=7;break;case 2:t=5;break;case 3:t=3;break;case 4:t=1;break;case 5:t=0;break;case 6:t=2;break;case 7:t=4;break;case 8:t=6}return t},t.prototype.changeInfo=function(e,t){void 0===t&&(t=!1);var r=this,i=userDataMaster.cats[e];if(!t){r.currentBall=e,r.nameImg.texture=RES.getRes("img_name_0"+(e+1)+"_png"),r.natureText.text="球球属性："+i.des;for(var n=i.belong,a=userDataMaster.travels,o=0;3>o;o++){var s="img_imprinting_a"+(a[n[o]].id+1)+"_png";r["travelImg_"+o].texture=RES.getRes(s)}}if(4==e)return r.fireGroup.visible=!0,r.popularGroup.visible=!1,r.fireText.text="成功邀请6位好友即可解锁火火球哦（"+r.fireList.length+"/6）",void(userDataMaster.cats[e].state&&userDataMaster.runCat==e?r.fireBtn.texture=RES.getRes("btn_receive_09_png"):!userDataMaster.cats[e].state&&r.fireList.length>=6?r.fireBtn.texture=RES.getRes("btn_unlocking_2_png"):userDataMaster.cats[e].state&&r.fireList.length>=6&&(r.fireBtn.texture=RES.getRes("btn_receive_10_png")));r.fireGroup.visible=!1,r.popularGroup.visible=!0,r.fruitText.text="能量果喂养中（"+i.process+" / "+i.target+"）";var d=i.process/i.target;r.processBar.width=650*d,r.progressText.text=parseInt(100*d+"")+"%",r.progressGroup.x=650*d,1>d?r.raiseBtn.texture=RES.getRes("btn_receive_11_png"):userDataMaster.runCat==e?r.raiseBtn.texture=RES.getRes("btn_receive_09_png"):r.raiseBtn.texture=RES.getRes("btn_receive_10_png")},t.prototype.raiseFun=function(){var e=userDataMaster.cats[this.currentBall];e.process/e.target;!e.state&&e.process<e.target?userDataMaster.myGold>=100?(userDataMaster.myGold-=100,e.process+=100,e.process==e.target&&(e.state=!0,this.filterFun(this["img_"+this.currentBall],1),this.addChild(new getSuccess(this.currentBall,e.name))),userDataMaster.setCat(this.currentBall,e),this.changeInfo(this.currentBall,!0)):this.addChild(new getEnergyModal(userDataMaster.myInfo.uid,userDataMaster.getToday(),2)):e.state&&this.currentBall!=userDataMaster.runCat&&(userDataMaster.myRunCat=this.currentBall,this.raiseBtn.texture=RES.getRes("btn_receive_09_png"))},t}(eui.Component);__reflect(myBalls.prototype,"myBalls",["eui.UIComponent","egret.DisplayObject"]);var rankItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){},t.prototype.dataChanged=function(){this.data.rank.length>4&&(this.data.rank=this.data.rank.slice(0,4)+"…"),this.index.text=this.data.rank+"",this.headimg.source=this.data.avatarUrl,this.score.text=this.data.score,this.data.nickName.length>5&&(this.data.nickName=this.data.nickName.slice(0,5)+"…"),this.nickName.text=this.data.nickName,this.headimg.mask=this.headimgMask,this.data.rank<4?(this.bestHat.visible=!0,this.bestHat.texture=RES.getRes("icn_medal_0"+this.data.rank+"_png")):this.bestHat.visible=!1},t}(eui.ItemRenderer);__reflect(rankItem.prototype,"rankItem",["eui.UIComponent","egret.DisplayObject"]);var reborn=function(e){function t(t,r,i,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var a=e.call(this)||this;return a.score=0,a.energy=0,a.ballId=0,a.terval=null,a.current_time=5,a.energyAdd=0,a.score=t,a.energy=i,a.ballId=r,a.energyAdd=n,a}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;this.bgImg.height=this.stage.stageHeight,this.scoreText.text=this.score+"",platform.openDataContext.postMessage({type:"passInit",score:e.score,width:80,height:80});var t=platform.openDataContext.createDisplayObject();this.surpassGroup.addChild(t),this.terval=setInterval(function(){e.current_time>0&&e.current_time--,e.timing.texture=RES.getRes("img_time_0"+e.current_time+"_png"),e.current_time<=0&&clearInterval(e.terval)},1e3),setTimeout(function(){e.ignoreBtn.visible=!0},5e3),e.ignoreBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ignoreFun,this)},t.prototype.ignoreFun=function(){var e=this.parent.parent;e.removeChild(this.parent),e.addChild(new gameOver(this.score,this.ballId,this.energy,this.energyAdd,.5))},t}(eui.Component);__reflect(reborn.prototype,"reborn",["eui.UIComponent","egret.DisplayObject"]);var throughModal=function(e){function t(){var t=e.call(this)||this;return t.list=[],t.chooseList=[],t.terval=null,t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this,t=new egret.BlurFilter(4,4);e.process.filters=[t]},t}(eui.Component);__reflect(throughModal.prototype,"throughModal",["eui.UIComponent","egret.DisplayObject"]);var travelItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.image.mask=this.imgMask,this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},this)},t.prototype.dataChanged=function(){this.title.text=this.data.name,this.image.source=this.data.image||"",this.image.mask=this.imgMask},t}(eui.ItemRenderer);__reflect(travelItem.prototype,"travelItem",["eui.UIComponent","egret.DisplayObject"]),window.travelItem=travelItem;var travelScene=function(e){function t(){var t=e.call(this)||this;return t.dataArr=[{index:0,x:102,y:399,state:0,type:0},{index:1,x:244,y:371,state:0,type:0},{index:2,x:384,y:371,state:0,type:0},{index:3,x:524,y:401,state:0,type:0},{index:-1,x:540,y:562,state:0,type:1},{index:4,x:384,y:551,state:0,type:0},{index:5,x:234,y:571,state:0,type:0},{index:6,x:104,y:621,state:0,type:0},{index:7,x:104,y:771,state:0,type:0},{index:-1,x:238,y:798,state:0,type:1},{index:8,x:384,y:793,state:0,type:0},{index:9,x:524,y:836,state:0,type:0},{index:10,x:544,y:986,state:0,type:0},{index:11,x:384,y:993,state:0,type:0},{index:-1,x:239,y:1018,state:0,type:1},{index:12,x:104,y:1048,state:0,type:0},{index:13,x:104,y:1198,state:0,type:0},{index:14,x:244,y:1198,state:0,type:0},{index:15,x:384,y:1220,state:0,type:0},{index:-1,x:539,y:1272,state:0,type:1},{index:16,x:544,y:1403,state:0,type:0},{index:17,x:384,y:1420,state:0,type:0},{index:18,x:234,y:1438,state:0,type:0},{index:19,x:104,y:1475,state:0,type:0},{index:-1,x:101,y:1631,state:0,type:1},{index:20,x:244,y:1635,state:0,type:0},{index:21,x:384,y:1657,state:0,type:0},{index:22,x:524,y:1700,state:0,type:0},{index:23,x:544,y:1850,state:0,type:0},{index:-1,x:385,y:1860,state:0,type:1},{index:24,x:234,y:1877,state:0,type:0},{index:25,x:104,y:1914,state:0,type:0},{index:26,x:104,y:2064,state:0,type:0},{index:-1,x:305,y:2100,state:0,type:1}],t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeFun,this),this.scroller.height=this.stage.stageHeight,this.createFun(),AdMaster.closeBannerAd()},t.prototype.createFun=function(){for(var e=this,t=e.dataArr,r=userDataMaster.travels,i=userDataMaster.travelList,n=function(n){var o=void 0,s=void 0,d=void 0;if(1==t[n].type&&n>0&&1==r[n].state&&(o="img_gift_a3_png"),1==t[n].type&&n>0&&0==r[n].state&&t[n-1].index<i.length&&(o="img_gift_a2_png"),1==t[n].type&&n>0&&t[n-1].index>=i.length&&(o="img_gift_a1_png"),0==t[n].type&&t[n].index>=i.length&&(o="img_bg_imprinting_2_png"),0==t[n].type&&t[n].index<i.length){o="img_bg_imprinting_1_png";var u=i[t[n].index];s=e.createBitmapByName("img_imprinting_b"+(r[u].id+1)+"_png",t[n].x-15,t[n].y-15,156,135);var c=r[u].name;if(d=new eui.Label(c),d.size=20,d.textColor=4667e3,d.x=t[n].x-15+(156-d.width)/2,d.y=t[n].y+130,2==r[u].state){r[u].state=1;var l=e.createBitmapByName("img_label_02_png",t[n].x+80,t[n].y-20);a.content.addChild(l),userDataMaster.setTravel(u,r[u])}}var h=e.createBitmapByName(o,t[n].x-15,t[n].y-15);if(a.content.addChild(h),"img_gift_a2_png"==o){var p=e.createBitmapByName("img_label_05_png",t[n].x+30,t[n].y-20);a.content.addChild(p),h.touchEnabled=!0,h.name="img_"+n,h.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.getFun(h,p,n)},a)}s&&(a.content.addChild(s),a.content.addChild(d))},a=this,o=0;o<t.length;o++)n(o)},t.prototype.getFun=function(e,t,r){var i=userDataMaster.myTravels[r];0==i.state&&(i.state=1,userDataMaster.setTravel(r,i),userDataMaster.myGold+=50,e.texture=RES.getRes("img_gift_a3_png"),t.parent&&this.content.removeChild(t),this.addChild(new getSuccess(-1,"x50")))},t.prototype.closeFun=function(){var e=this.parent;e.removeChild(this),AdMaster.cacheBannerAd&&AdMaster.openBannerAd({width:700,height:300})},t.prototype.createBitmapByName=function(e,t,r,i,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var a=new egret.Bitmap,o=RES.getRes(e);return a.texture=o,a.x=t,a.y=r,i>0&&(a.x=t+(i-a.width)/2),n>0&&(a.y=r+(n-a.height)/2),a},t}(eui.Component);__reflect(travelScene.prototype,"travelScene",["eui.UIComponent","egret.DisplayObject"]);var tryModal=function(e){function t(t){var r=e.call(this)||this;return r.currentBall=0,r.currentBall=t,r}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.ballImg.texture=RES.getRes("img_elf_"+this.currentBall+"2_png"),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureFun,this),this.ignoreBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ignoreFun,this)},t.prototype.sureFun=function(){var e=this.parent.parent;e.removeChild(this.parent),e.addChild(new startScene(!0))},t.prototype.ignoreFun=function(){var e=this.parent.parent;e.removeChild(this.parent),e.addChild(new startScene)},t}(eui.Component);__reflect(tryModal.prototype,"tryModal",["eui.UIComponent","egret.DisplayObject"]);var circle=function(e){function t(){var t=e.call(this)||this;return t.positionArr=[{index:0,x:300,y:471,scaleX:1,scaleY:1},{index:1,x:138,y:471,scaleX:.8,scaleY:.8},{index:2,x:44,y:431,scaleX:.7,scaleY:.7},{index:3,x:28,y:363,scaleX:.6,scaleY:.6},{index:4,x:94,y:313,scaleX:.5,scaleY:.5},{index:5,x:190,y:295,scaleX:.4,scaleY:.4},{index:6,x:306,y:287,scaleX:.35,scaleY:.35},{index:7,x:406,y:295,scaleX:.4,scaleY:.4},{index:8,x:506,y:313,scaleX:.5,scaleY:.5},{index:9,x:576,y:363,scaleX:.6,scaleY:.6},{index:10,x:562,y:431,scaleX:.7,scaleY:.7},{index:11,x:464,y:471,scaleX:.8,scaleY:.8}],t.canMove=!0,t.position={x:0,y:0,time:0},t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.beginFun,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.endFun,this)},t.prototype.beginFun=function(e){this.position={x:e.stageX,y:e.stageY,time:egret.getTimer()}},t.prototype.endFun=function(e){var t=egret.getTimer()-this.position.time,r=1;r=150>t?4:200>t?3:300>t?2:1,this.position.x-e.stageX>50?this.moveFun("right",r):e.stageX-this.position.x>50&&this.moveFun("left",r),this.position.x=0,this.position.time=0},t.prototype.moveFun=function(e,t){var r=this;if(void 0===e&&(e="left"),void 0===t&&(t=1),this.canMove){this.canMove=!1;for(var i=function(i,a){var o=0;if(n["img_"+i].name){var s=n["img_"+i].name.slice(8);o="left"==e?s>0?parseInt(s)-1:11:11>s?parseInt(s)+1:0}else o="left"==e?i>0?i-1:11:11>i?i+1:0;n["img_"+i].name="current_"+o;for(var d=function(e){egret.Tween.get(n["img_"+i]).wait(1e3/t*e).to({x:n.positionArr[o].x,y:n.positionArr[o].y,scaleX:n.positionArr[o].scaleX,scaleY:n.positionArr[o].scaleY},1e3/t).call(function(){11==i&&e==t-1&&(r.canMove=!0)})},u=0;t>u;u++)d(u)},n=this,a=0,o=this.positionArr.length;o>a;a++)i(a,o)}},t}(eui.Component);__reflect(circle.prototype,"circle",["eui.UIComponent","egret.DisplayObject"]);var common=function(e){function t(){var t=e.call(this)||this;return t.beeSpeed={speedX:0,speedY:0,acceleration:0,outSpeed:0,oldAcceleration:0,dragPosition:0,oldSpeedX:.6},t.buildingSpeed=10,t.buildingArr=[],t.currentTimer=egret.getTimer(),t.removeArr=[],t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bee?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){this.createBuilding("center",800),this.createBuilding("left",750),this.createBuilding("right",700),this.createBuilding("left",650),this.createBuilding("right",600),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.moveBee,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.createBuilding=function(e,t){void 0===e&&(e="left"),void 0===t&&(t=800);var r=this.createBitmapByName("img_castle_a2_png");r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,"left"==e?r.x=100:"right"==e?r.x=500:(r.x=375,r.texture=RES.getRes("img_castle_a1_png")),r.y=t+r.anchorOffsetY,this.buildingGroup.addChildAt(r,0),egret.Tween.get(r).to({y:800+r.anchorOffsetY},5e3),this.buildingArr.push({content:r,hit:!1,type:e})
},t.prototype.onEnterFrame=function(){var e=egret.getTimer()-this.currentTimer;10>e||e>1e3||(this.bee.x+=e*this.beeSpeed.speedX,this.bee.y+=this.beeSpeed.speedY*e+.5*this.beeSpeed.acceleration*e*e+this.beeSpeed.outSpeed,this.beeSpeed.speedY+=e*this.beeSpeed.acceleration,this.collisionFun(),this.currentTimer=egret.getTimer(),this.bee.x+this.bee.width>=this.stage.stageWidth&&(this.beeSpeed.speedY=-this.beeSpeed.speedY,this.beeSpeed.speedX=-this.beeSpeed.speedX))},t.prototype.moveBee=function(e){323==this.bee.x&&200==this.bee.y?this.beeSpeed.acceleration=.005:this.buildingArr[0].content.y-(this.bee.y+this.bee.height)>50&&(console.log(66),this.beeSpeed.outSpeed=30,this.beeSpeed.speedX=0)},t.prototype.collisionFun=function(){var e=this;if(0!=this.buildingArr.length){var t=this.buildingArr[0].content.x-this.buildingArr[0].content.anchorOffsetX,r=this.buildingArr[0].content.x+this.buildingArr[0].content.anchorOffsetX,i=this.buildingArr[0].content.y-this.buildingArr[0].content.anchorOffsetY,n=this.bee.x+this.bee.width/2>=t&&this.bee.x+this.bee.width/2<=r&&i<=this.bee.y+this.bee.height&&i>=this.bee.y+this.bee.height/2;if(n&&!this.buildingArr[0].hit&&this.beeSpeed.speedY>=0){this.buildingArr[0].hit=!0,this.beeSpeed.speedY=-2,this.beeSpeed.outSpeed=0;var a=this.buildingArr.shift();console.log(777),egret.Tween.removeTweens(a.content),egret.Tween.get(a.content).to({y:1500},1e3).call(function(){e.buildingGroup.removeChild(a.content)});var o="left"==this.buildingArr[0].type?"right":"left";this.createBuilding(o,600),this.buildingArr.length>0&&(this.buildingArr[0].content.texture=RES.getRes("img_castle_a1_png"),this.bee.x>this.buildingArr[0].content.x+this.buildingArr[0].content.width/2?this.beeSpeed.speedX=-this.beeSpeed.oldSpeedX:this.beeSpeed.speedX=this.beeSpeed.oldSpeedX)}}},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e);return t.texture=r,t},t}(eui.Component);__reflect(common.prototype,"common",["eui.UIComponent","egret.DisplayObject"]);var gameOver=function(e){function t(t,r,i,n,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=e.call(this)||this;return o.multip=1,o.score=0,o.ballId=0,o.energy=0,o.energyAdd=0,o.more_list=[],o.terval=null,o.more_index_0=0,o.more_index_1=0,o.pro=0,o.touchPosition=[{name:"homeBtn",func:"homeFun"},{name:"travelBtn",func:"travelFun"},{name:"getEnergy",func:"getEnergyFun"},{name:"doubleEnergy",func:"doubleEnergyFun"},{name:"again",func:"againFun"},{name:"shareBtn",func:"shareFun"},{name:"openBall",func:"openBallFun"}],o.haveGet={one:!1,"double":!1},o.score=t,o.ballId=r,o.energy=parseInt(i*(1+n)+""),o.energyAdd=n,o.pro=a,o}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.again?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;soundMaster.stopSongMusic(),AdMaster.cacheBannerAd&&AdMaster.openBannerAd({width:700,height:300}),e.scoreText.text=e.score+"",userDataMaster.myGold+=e.energy;var t=userDataMaster.degree;1==e.pro?(e.centerImg.texture=RES.getRes("img_bg_steps_01_png"),e.titleText.text="完整通关"):t++,e.degree_0.text=t-1+"阶",e.degree_1.text=t+"阶",e.degree_2.text=t+1+"阶";var r=280*e.pro;e.headGroup.x=r,e.head.source=userDataMaster.myInfo.avatarUrl,e.head.mask=e.headMask,e.proGroup.x=r,e.proBar.width=r,e.percentText.text=Math.floor(100*e.pro)+"%",e.energyNum.text=""+e.energy,e.doubleNum.text=e.energy+" x ?";for(var i=userDataMaster.MyCats[e.ballId].belong,n=Math.floor(Math.random()*i.length),a=[],o=0;o<i.length;o++)o!=n&&a.push(i[o]);var s=userDataMaster.travels[a[0]],d=userDataMaster.travels[a[1]];if(0==s.state&&(s.state=2,e.newTip.visible=!0,userDataMaster.setTravel(a[0],s),userDataMaster.travelList.push(a[0])),0==d.state&&(d.state=2,e.newTip.visible=!0,userDataMaster.setTravel(a[1],d),userDataMaster.travelList.push(a[1])),userDataMaster.recommand&&userDataMaster.recommand[2]&&userDataMaster.recommand[2].games){if(e.more_list=userDataMaster.recommand[2].games,e.more_list.length>1){var u=e.more_list.length;e.more_index_1=u-1,e.more_0.source=e.more_list[e.more_index_0].image,e.more_list[e.more_index_0].name.length>5&&(e.more_list[e.more_index_0].name=e.more_list[e.more_index_0].name.slice(0,4)+"…"),e.text_0.text=e.more_list[e.more_index_0].name,e.more_0.mask=e.mask_0,e.more_1.source=e.more_list[e.more_index_1].image,e.more_list[e.more_index_1].name.length>5&&(e.more_list[e.more_index_1].name=e.more_list[e.more_index_1].name.slice(0,4)+"…"),e.text_1.text=e.more_list[e.more_index_1].name,e.more_1.mask=e.mask_1,e.group_0.visible=!0,e.group_1.visible=!0,e.terval=setInterval(function(){e.more_index_0<u-1?e.more_index_0++:e.more_index_0=0,e.more_index_1>0?e.more_index_1--:e.more_index_1=u-1,e.more_0.source=e.more_list[e.more_index_0].image,e.more_list[e.more_index_0].name.length>5&&(e.more_list[e.more_index_0].name=e.more_list[e.more_index_0].name.slice(0,4)+"…"),e.text_0.text=e.more_list[e.more_index_0].name,e.more_1.source=e.more_list[e.more_index_1].image,e.more_list[e.more_index_1].name.length>5&&(e.more_list[e.more_index_1].name=e.more_list[e.more_index_1].name.slice(0,4)+"…"),e.text_1.text=e.more_list[e.more_index_1].name},5e3),e.group_0.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.jumpFun(0)},e),e.group_1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.jumpFun(1)},e)}egret.Tween.get(e.group_0,{loop:!0}).to({rotation:20},300).to({rotation:-20},600).to({rotation:0},300),egret.Tween.get(e.group_1,{loop:!0}).to({rotation:20},300).to({rotation:-20},600).to({rotation:0},300)}egret.Tween.get(e.getEnergy,{loop:!0}).to({scaleX:1.1,scaleY:1.1},800).to({scaleX:1,scaleY:1},1e3),this.updateScore(),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchFun,this)},t.prototype.touchFun=function(e){for(var t=this,r=e.stageX,i=e.stageY,n=t.touchPosition,a=0,o=n.length;o>a;a++){var s=t[n[a].name],d=r-(s.x-s.anchorOffsetX),u=i-(s.y-s.anchorOffsetY);if(d>=0&&d<=s.width&&u>=0&&u<=s.height)return void(t[n[a].func]&&t[n[a].func]())}},t.prototype.jumpFun=function(e){var t=this,r=t.more_list[t["more_index_"+e]];CallbackMaster.recommandClick(1,r);var i=2;platform.navigateToMiniProgram({appId:r.appid,path:r.path,extraData:{},success:function(e){},fail:function(e){i=3},complete:function(){CallbackMaster.recommandClick(i,r)}})},t.prototype.updateScore=function(){var e=this;platform.openDataContext.postMessage({type:"updateScore",score:e.score,width:80,height:80}),this.score>userDataMaster.bestScore&&(userDataMaster.bestScore=this.score);var t={score:this.score,uid:userDataMaster.getMyInfo.uid};ServiceMaster.post(ServiceMaster.getScore,t,function(e){1===parseInt(e.code)&&e.data})},t.prototype.homeFun=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchFun,this),this.terval&&clearInterval(this.terval);var e=this.parent;e.removeChild(this),e.addChild(new startScene)},t.prototype.getEnergyFun=function(){var e=this;e.haveGet.one||(e.addChild(new getSuccess(-1,""+e.energy)),e.haveGet.one=!0)},t.prototype.doubleEnergyFun=function(){function e(){t.multip=2+Math.floor(3*Math.random()),userDataMaster.myGold+=t.energy*(t.multip-1),t.doubleNum.text=t.energy+" x "+t.multip,egret.Tween.removeTweens(t.getEnergy),t.addChild(new getSuccess(-1,"x "+2*t.energy)),t.haveGet["double"]=!0}var t=this;t.haveGet["double"]||AdMaster.useVideo(function(){e()},function(){CallbackMaster.openShare(function(){e()})})},t.prototype.shareFun=function(){CallbackMaster.openShare(null,!1)},t.prototype.againFun=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchFun,this),this.terval&&clearInterval(this.terval);var e=this.parent;e.removeChild(this),e.addChild(new runningScene)},t.prototype.openBallFun=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchFun,this),this.terval&&clearInterval(this.terval);var e=this.parent;e.removeChild(this);var t=new startScene;e.addChild(t),t.addChild(new myBalls(!0))},t}(eui.Component);__reflect(gameOver.prototype,"gameOver",["eui.UIComponent","egret.DisplayObject"]);var rank=function(e){function t(){var t=e.call(this)||this;return t.dataGroup=new eui.DataGroup,t.sourceArr=new eui.ArrayCollection([]),t.currentType="friend",t.worldPage=1,t.endPage=1,t.pageSize=6,t}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){var e=this;this.bgImg.height=this.stage.stageHeight,platform.openDataContext.postMessage({type:"rank",width:600,height:780});var t=platform.openDataContext.createDisplayObject();this.friendGroup.addChild(t),this.dataGroup.dataProvider=this.sourceArr,this.dataGroup.itemRenderer=rankItem;var r=new eui.VerticalLayout;r.gap=14,this.dataGroup.layout=r,this.worldGroup.addChild(this.dataGroup),this.getWorld(),this.lastPage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.changePage("-1")},this),this.nextPage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.changePage("+1")},this),this.goHome.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goHomeFun,this),this.friend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.friendFun,this),this.world.addEventListener(egret.TouchEvent.TOUCH_TAP,this.worldFun,this)},t.prototype.changePage=function(e){"friend"==this.currentType?this.getMore(e):("-1"==e?this.worldPage>1?this.worldPage--:1:this.worldPage<this.endPage?this.worldPage++:"",this.getWorld())},t.prototype.getWorld=function(){var e=this,t=this,r={uid:userDataMaster.getMyInfo.uid,page:t.worldPage,size:t.pageSize};ServiceMaster.post(ServiceMaster.rank_world,r,function(r){if(1==r.code&&r.data){var i=r.data.rank_world;t.endPage=r.data.page_num,t.sourceArr.removeAll(),e.pageText.text=t.worldPage+" / "+t.endPage;for(var n=0;n<i.length;n++)t.sourceArr.addItem(i[n])}})},t.prototype.friendFun=function(){this.pageText.visible=!1,this.friend.texture=RES.getRes("img_tittle_a1_png"),this.world.texture=RES.getRes("img_tittle_b2_png"),this.friendGroup.visible=!0,this.worldGroup.visible=!1,this.currentType="friend"},t.prototype.worldFun=function(){this.pageText.visible=!0,this.friend.texture=RES.getRes("img_tittle_a2_png"),this.world.texture=RES.getRes("img_tittle_b1_png"),this.friendGroup.visible=!1,this.worldGroup.visible=!0,this.currentType="world"},t.prototype.getMore=function(e){platform.openDataContext.postMessage({type:"rank",page:e,width:600,height:780})},t.prototype.goHomeFun=function(){var e=this.parent;e.removeChild(this)},t}(eui.Component);__reflect(rank.prototype,"rank",["eui.UIComponent","egret.DisplayObject"]);var runningScene=function(e){function t(t,r,i,n,a,o,s,d){void 0===t&&(t=1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=-1),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===d&&(d=[]);var u=e.call(this)||this;return u.factor=50,u.currentTimer=egret.getTimer(),u.flowerArr=[],u.ceilArr=[],u.removeArr=[],u.score=0,u.currentTheme=1,u.moveSpeed=1,u.hitNum=0,u.perfectNum=0,u.themeArr=[],u.buildingLoop={img_castle_a:[],img_castle_b:[],img_castle_c:[],img_castle_d:[],img_castle_e:[],img_castle_f:[],img_castle_g:[],img_castle_h:[],img_castle_i:[],img_castle_j:[],lightning:[]},u.list=[],u.chooseList=[],u.terval=null,u.adaptation=0,u.rebornNum=0,u.guideProcess=0,u.worldSpeed=1e3,u.speed={before:4e3,guide:2e3,start:1500,common:1e3,still:1e6},u.currentBall=userDataMaster.runCat,u.energy=0,u.trying=!1,u.energyAdd=0,u.degree=0,u.currentTheme=t,u.score=r,u.hitNum=i,-1!=n&&(n>50&&(n-=100,u.trying=!0),u.currentBall=n),u.energyAdd=s,u.rebornNum=a,u.energy=o,d.length>0&&(u.themeArr=d),u}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.scoreText?this.init():this.addEventListener(egret.Event.COMPLETE,this.init,this)},t.prototype.init=function(){var e=this;AdMaster.closeBannerAd(),this.worldSpeed=this.speed.still,e.degree=userDataMaster.degree,0==e.rebornNum?new randomTheme(e.degree).init(function(){e.addChildAt(new colorBgCom(e.currentTheme),0),e.themeArr=randomTheme.getInstance().degreeThemeArr}):(e.addChildAt(new colorBgCom(e.currentTheme),0),e.themeArr=randomTheme.getInstance().degreeThemeArr),this.scoreText.text=this.score+"",this.adaptation=(this.stage.stageHeight-1334)/this.factor;var t=userDataMaster.cats[this.currentBall];this.ballText.text=t.name,this.world=new p2.World,this.world.sleepMode=p2.World.BODY_SLEEPING,this.world.gravity=[0,-60],this.spirit=new spiritCom,this.spirit.init(e.currentBall,e.adaptation,function(t){e.addChild(t.displays[0]),e.world.addBody(t),e.worldSpeed=e.speed.before,e.bee=t,setTimeout(function(){e.ballText.visible=!0,egret.Tween.get(e.startTips).to({alpha:1},500)},1e3),setTimeout(function(){e.worldSpeed=e.speed.still,e.guide&&(e.guide.visible=!0),e.startBtn.visible=!0},2e3)});for(var r=e.themeArr[e.currentTheme-1],i=[{type:0,y:6},{type:2,y:8},{type:1,y:10},{type:2,y:12},{type:1,y:14}],n=function(t){var n=i[t],a=new buildingCom(n.type,e.adaptation);a.init(r,n.y),e.world.addBody(a.boxBody),setTimeout(function(){e.flowerGroup.addChildAt(a.boxBody.displays[0],0),e.flowerGroup.addChildAt(a.boxBody.displays[1],1)},10),e.flowerArr.push(a)},a=0;5>a;a++)n(a);var o=new p2.Body({mass:1,position:[16,0],type:p2.Body.STATIC,material:new p2.Material(3)}),s=new p2.Box({width:1,height:60});o.addShape(s),o.displays=[],this.world.addBody(o),this.ceilArr.push(o);var o=new p2.Body({mass:1,position:[-1,0],type:p2.Body.STATIC,material:new p2.Material(3)}),s=new p2.Box({width:1,height:60});o.addShape(s),o.displays=[],this.world.addBody(o),this.ceilArr.push(o),userDataMaster.getMyInfo.is_new_user&&!this.trying&&(this.guide=new guideModal,this.addChild(this.guide),this.guide.addChild(this.startBtn),this.guide.visible=!1),egret.Tween.get(e.startBtn,{loop:!0}).to({scaleX:.8,scaleY:.8},1e3).to({scaleX:1,scaleY:1},1e3),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startFun,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.perfectGif=movieMaster.getGif("continue"),this.perfectGif.x=30,this.perfectGroup.addChild(this.perfectGif),platform.onShow(function(){e.currentTimer&&(e.currentTimer=egret.getTimer())})},t.prototype.startFun=function(){soundMaster.playSongMusic(this.degree),this.startBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startFun,this),this.removeChild(this.startImg),this.removeChild(this.startTips),this.removeChild(this.ballText),this.removeChild(this.startBg),egret.Tween.removeTweens(this.startBtn),this.guide?(this.guide.process_1.visible=!1,this.guide.removeChild(this.startBtn),this.removeChild(this.guide),this.guideProcess=1,this.worldSpeed=this.speed.guide):(this.removeChild(this.startBtn),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchFun,this),this.worldSpeed=this.speed.start),this.currentTimer=egret.getTimer()},t.prototype.onEnterFrame=function(){var e=this,t=egret.getTimer()-this.currentTimer;if(!(10>t||t>1e3)){this.world.step(t/this.worldSpeed),this.currentTimer=egret.getTimer();for(var r=egret.MainContext.instance.stage.stageHeight,i=this.world.bodies.length,n=e.themeArr[e.currentTheme-1],a=n.top+10,o=n.left,s=0;i>s;s++)for(var d=this.world.bodies[s],u=d.displays.length,c=0;u>c;c++){var l=d.displays[c];l&&(0==c&&(l.anchorOffsetX=d.displays[0].width/2),l.x=d.position[0]*this.factor,l.y=r-d.position[1]*this.factor,l.rotation=360-180*(d.angle+d.shapes[c].angle)/Math.PI,1==c&&(l.y-=(d.displays[0].height/2-a)*d.displays[0].scaleY,l.x-=(d.displays[0].width/2-o)*d.displays[0].scaleX,l.rotation=180))}if(e.bee.position[1]<0)return void this.gameOver();this.guide&&this.guideProcess%2==1&&2==e.flowerArr[0].type&&Math.abs(this.bee.position[0]-this.flowerArr[0].boxBody.position[0])<1&&(this.addChild(this.guide),this.guide.process_3.visible=!1,this.guide.process_2.visible=!0,this.guide.alpha=0,egret.Tween.get(this.guide).to({alpha:1},1e3).call(function(){e.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.touchFun,e)}),this.worldSpeed=this.speed.still,this.guideProcess++),this.guide&&this.guideProcess%2==0&&1==e.flowerArr[0].type&&Math.abs(this.bee.position[0]-this.flowerArr[0].boxBody.position[0])<1&&(this.addChild(this.guide),this.guide.process_2.visible=!1,this.guide.process_3.visible=!0,this.guide.alpha=0,egret.Tween.get(this.guide).to({alpha:1},1e3).call(function(){e.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.touchFun,e)}),this.worldSpeed=this.speed.still,this.guideProcess++),this.guide&&7==this.guideProcess&&7==e.hitNum&&(this.addChild(this.guide),this.guide.process_7.visible=!0,this.guide.alpha=0,egret.Tween.get(this.guide).to({alpha:1},1e3),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchFun,this),userDataMaster.createLoginBtn(250,808,250,90),userDataMaster.loginCallback=function(){userDataMaster.myGold+=200,userDataMaster.myInfo.is_new_user=!1;var t=e.parent;t.removeChild(e),soundMaster.stopSongMusic(),t.addChild(new startScene)},this.guide.knowBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){userDataMaster.myGold+=200,userDataMaster.myInfo.is_new_user=!1;var t=e.parent;t.removeChild(e),soundMaster.stopSongMusic(),t.addChild(new startScene)},e));var h=(e.bee.position[1]-e.flowerArr[0].boxBody.position[1])*e.factor,p=Math.abs(e.bee.position[0]-e.flowerArr[0].boxBody.position[0])-n.tw/2/e.factor;if(!e.flowerArr[0].haveHit&&e.bee.velocity[1]<=0&&0>=p&&h<=357.5-n.th-10&&h>=150){var g=randomTheme.getInstance().degreeItem;e.score+=randomTheme.getInstance().getScore(e.currentTheme),e.energy+=g.energy,e.flowerArr[0].boxBody.displays[0].x+30>=e.bee.displays[0].x&&e.flowerArr[0].boxBody.displays[0].x-30<=e.bee.displays[0].x?(e.flowerArr[0].boxBody.displays[1].parent&&e.flowerGroup.removeChild(e.flowerArr[0].boxBody.displays[1]),e.perfectNum++,e.perfectNum>=3&&(egret.Tween.removeTweens(e.perfectGroup),e.perfectGroup.visible=!0,e.perfectGroup.scaleX=2.5,e.perfectGroup.scaleY=2.5,e.perfectGroup.alpha=1,e.perfectGif.gotoAndPlay(0,1),e.perfectText.text="Combo x"+e.perfectNum,e.score+=100,e.addChildAt(e.perfectGroup,2),egret.Tween.get(e.perfectGroup).to({scaleX:1,scaleY:1},500).to({alpha:0},2e3).call(function(){e.perfectGroup.parent&&e.perfectGroup.parent.removeChild(e.perfectGroup)}))):e.perfectNum=0,platform.vibrateShort({success:function(e){}}),e.bee.mass=3e3,this.scoreText.text=this.score+"",e.flowerArr[0].haveHit=!0;var m=e.flowerArr.shift();m.boxBody.velocity=[0,-10],e.removeArr.push(m);var y=12;1==m.type?(y=20,y+=3*Math.random(),e.bee.angle=-.2):2==m.type?(y=-20,y-=3*Math.random(),e.bee.angle=.2):e.worldSpeed=this.speed.common,e.bee.velocity=[y,36],e.bee.damping=.8,e.bee.velocity[0]>0?(e.bee.angle=.2,e.bee.angularVelocity=0):e.bee.velocity[0]<0?(e.bee.angle=-.2,e.bee.angularVelocity=0):e.bee.angularVelocity=.01,e.hitNum++;var f=e.hitNum==g.num;if(f){if(e.hitNum=0,!(e.currentTheme<e.themeArr.length))return void e.successOver();e.currentTheme++,n=e.themeArr[e.currentTheme-1],colorBgCom.getInstance().changeTheme(e.currentTheme);for(var v=n.name,_=0;_<e.flowerArr.length;_++){e.flowerArr[_].boxBody.shapes[0].width=n.width/this.factor,e.flowerArr[_].boxBody.displays[0].name=v,0==_?e.flowerArr[_].boxBody.displays[0].texture=RES.getRes(v+"1_png"):e.flowerArr[_].boxBody.displays[0].texture=RES.getRes(v+"2_png");var x=n.top+10,b=n.left;e.flowerArr[_].boxBody.displays[1].y=r-e.flowerArr[_].boxBody.position[1]*this.factor-(e.flowerArr[_].boxBody.displays[0].height/2-x)*e.flowerArr[_].boxBody.displays[0].scaleY,e.flowerArr[_].boxBody.displays[1].x=e.flowerArr[_].boxBody.position[0]*this.factor-(e.flowerArr[_].boxBody.displays[0].width/2-b)*e.flowerArr[_].boxBody.displays[0].scaleX}}e.flowerArr[0].boxBody.displays[0].texture=RES.getRes(n.name+"1_png"),egret.Tween.get(e.flowerArr[0].boxBody.displays[1]).to({height:313},500),setTimeout(function(){var t,r=2==m.type?1:2;e.buildingLoop[n.name].length>2?(t=e.buildingLoop[n.name].shift(),t.unpdateBuilding(r)):(t=new buildingCom(r,e.adaptation),t.init(n)),e.world.addBody(t.boxBody),setTimeout(function(){e.flowerGroup.addChildAt(t.boxBody.displays[0],0),e.flowerGroup.addChildAt(t.boxBody.displays[1],1)},100),e.flowerArr.push(t)},50)}else{var T=e.ceilArr[0].overlaps(e.bee);!T||e.bee.velocity[0]<0&&e.bee.velocity[1]>0||(e.bee.velocity=[-25,-8],e.bee.angle=-.2,e.bee.mass=8e3);var M=e.ceilArr[1].overlaps(e.bee);!M||e.bee.velocity[0]>0&&e.bee.velocity[1]>0||(e.bee.velocity=[25,-8],e.bee.angle=.2,e.bee.mass=8e3)}e.bee.velocity[1]<=0&&(e.bee.damping=0);for(var w=0,C=e.removeArr.length;C>w;w++)!e.removeArr[w]||!e.removeArr[w].boxBody||e.guide&&e.guide.parent||e.removeArr[w].afterHit(e.world,e.buildingLoop,e.removeArr,w);if(0!==e.flowerArr[0].type)for(var E=0,A=e.flowerArr.length;A>E;E++)e.flowerArr[E].changeScale(e.speed.common,e.worldSpeed)}},t.prototype.successOver=function(){userDataMaster.degree++,this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchFun,this),soundMaster.stopSongMusic();var e=this.parent;e.addChild(new gameOver(this.score,this.currentBall,this.energy,this.energyAdd,1)),e.removeChild(this)},t.prototype.gameOver=function(){if(this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchFun,this),soundMaster.stopSongMusic(),0==this.rebornNum){this.rebornNum++;var e=new reborn(this.score,this.currentBall,this.energy,this.energyAdd);this.addChild(e),e.rebornBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.judgeReborn,this)}else{var t=this.parent;t.addChild(new gameOver(this.score,this.currentBall,this.energy,this.energyAdd,.5)),t.removeChild(this)}},t.prototype.judgeReborn=function(){var e=this;AdMaster.useVideo(function(){r()},function(){CallbackMaster.openShare(function(){r()})});var r=function(){var r=e.parent,i=e.currentTheme,n=e.score,a=e.hitNum,o=e.currentBall,s=e.rebornNum,d=e.energy,u=e.energyAdd,c=e.themeArr;r.removeChild(e),r.addChild(new t(i,n,a,o,s,d,u,c))}},t.prototype.touchFun=function(e){this.bee.velocity=[0,-80],this.bee.angle=0,this.bee.angularVelocity=0,this.guide&&this.guide.parent&&(this.guide.process_3.visible=!1,this.guide["process_"+this.guideProcess].visible=!1,this.guide.parent.removeChild(this.guide),this.worldSpeed=this.speed.guide,this.guideProcess<7&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchFun,this))},t}(eui.Component);__reflect(runningScene.prototype,"runningScene",["eui.UIComponent","egret.DisplayObject"]);var startScene=function(e){function t(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r.tryIndex=-1,r.trying=!1,r.energyAdd=0,r.touchPosition=[{x:0,y:0,name:"houseBtn",func:"houseFun"},{x:0,y:0,name:"travelBtn",func:"travelFun"},{x:0,y:0,name:"rankBtn",func:"rankFun"},{x:0,y:0,name:"shareBtn",func:"shareFun"},{x:0,y:0,name:"friendBtn",func:"friendFun"},{x:0,y:0,name:"energyBtn",func:"energyFun"},{x:0,y:0,name:"startBtn",func:"startFun"},{x:0,y:0,name:"tryBtn",func:"tryFun"},{x:0,y:0,name:"addGold",func:"addGoldFun"}],r.trying=t,r}return __extends(t,e),t.prototype.partAdded=function(t,r){e.prototype.partAdded.call(this,t,r)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),null===this.startBtn?this.addEventListener(egret.Event.COMPLETE,this.init,this):this.init()},t.prototype.init=function(){var e=this;e.bgImg.height=e.stage.stageHeight,setTimeout(function(){AdMaster.cacheBannerAd&&AdMaster.openBannerAd({width:700,height:300})},1e3),e.moreCom=new moreScroller,e.moreCom.y=300,e.addChild(e.moreCom),e.moreCom.cacheAsBitmap=!0;var t=DeviceMaster.model.match(/iPhone ?X/gi);t&&(e.collection.y=80),setTimeout(function(){for(var t=[],r=userDataMaster.cats,i=0,n=r.length;n>i;i++)r[i].state||t.push(i);e.tryIndex=t[Math.floor(Math.random()*t.length)],e.tryImg.texture=RES.getRes("img_elf_"+e.tryIndex+"2_png"),e.tryName.texture=RES.getRes("text_list_json.img_name_0"+(e.tryIndex+1)+"_png"),egret.Tween.get(e.tryBtn,{loop:!0}).to({rotation:20},100).to({rotation:-20},200).to({rotation:0},100).wait(1e3),e.goldText.text=""+userDataMaster.gold,e.currentBall.texture=RES.getRes("img_elf_"+userDataMaster.runCat+"2_png");var a=userDataMaster.sourceEnergy;0!=a.uid&&a.day&&e.addChild(new getEnergyModal(a.uid,a.day)),2==userDataMaster.todayVideoEnergy?e.goldImg.texture+RES.getRes("img_moer_02_png"):egret.Tween.get(e.goldImg,{loop:!0}).to({scaleX:1.2,scaleY:1.2},500).to({scaleX:1,scaleY:1},600)},500),egret.Tween.get(e.circle_light,{loop:!0}).to({scaleX:.5,scaleY:.5},800).to({scaleX:1,scaleY:1},1500),egret.Tween.get(e.collection,{loop:!0}).to({x:230},500).to({x:244},300),egret.Tween.get(e.startBtn,{loop:!0}).to({scaleX:1.2,scaleY:1.2},1e3).to({scaleX:1,scaleY:1},800),e.touchRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchFun,this),userDataMaster.myCollection.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.updateData,this)},t.prototype.touchFun=function(e){for(var t=this,r=e.stageX,i=e.stageY,n=t.touchPosition,a=0,o=n.length;o>a;a++){var s=t[n[a].name],d=r-(s.x-s.anchorOffsetX),u=i-(s.y-s.anchorOffsetY);if(d>=0&&d<=s.width&&u>=0&&u<=s.height)return void(t[n[a].func]&&t[n[a].func]())}},t.prototype.addGoldFun=function(){function e(e){userDataMaster.dayVideoEnergy.num++,userDataMaster.myGold+=e,t.addChild(new getSuccess(-1,"x "+e)),2==userDataMaster.dayVideoEnergy.num&&(t.goldImg.texture=RES.getRes("img_moer_02_png"),egret.Tween.removeTweens(t.goldImg))}var t=this;switch(userDataMaster.todayVideoEnergy){case 0:CallbackMaster.openShare(function(){e(50)}),CallbackMaster.shareFailText="分享到群或者好友就能获得能量果哦~";break;case 1:AdMaster.useVideo(function(){e(100)},function(){CallbackMaster.openShare(function(){e(100)}),CallbackMaster.shareFailText="分享到群或者好友就能获得能量果哦~"});break;case 2:platform.showModal({title:"温馨提示",content:"今日次数已用完，明日再来"})}},t.prototype.tryFun=function(){function e(){t.tryTip.visible=!0,t.currentBall.texture=RES.getRes("img_elf_"+t.tryIndex+"2_png"),userDataMaster.updateTodayTry()}var t=this;userDataMaster.todayTry?AdMaster.useVideo(function(){e()},function(){CallbackMaster.openShare(function(){e()}),CallbackMaster.shareFailText="分享到群或者好友就能立刻试玩"+userDataMaster.cats[t.tryIndex].name+"哦~"}):platform.showModal({title:"温馨提示",content:"今天你已经试玩过了，请明天再来哦"})},t.prototype.updateData=function(e){this.goldText.text=""+userDataMaster.gold,this.tryTip.visible?this.currentBall.texture=RES.getRes("img_elf_"+this.tryIndex+"2_png"):this.currentBall.texture=RES.getRes("img_elf_"+userDataMaster.runCat+"2_png")},t.prototype.houseFun=function(){var e=this;e.addChild(new myBalls),e.houseTip.visible=!1},t.prototype.travelFun=function(){var e=this;this.addChild(new travelScene),e.travelTip.visible=!1},t.prototype.rankFun=function(){var e=this;e.addChild(new rank)},t.prototype.shareFun=function(){var e=this;CallbackMaster.openShare(function(){e.energyAdd=.1,e.energyAddGroup.visible=!0,e.shareTip.visible=!1})},t.prototype.friendFun=function(){var e=this;e.addChild(new friendHelp)},t.prototype.energyFun=function(){var e=this;e.addChild(new dayEnergy)},t.prototype.startFun=function(){var e=this;egret.Tween.removeAllTweens(),e.touchRect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchFun,this),userDataMaster.myCollection.removeEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.updateData,this),clearInterval(moreScroller.getInstance().scrTerval);var t=e.parent;t.removeChild(e);var r=-1;this.tryTip.visible&&(r=this.tryIndex),t.addChild(new runningScene(1,0,0,r,0,0,e.energyAdd))},t}(eui.Component);__reflect(startScene.prototype,"startScene",["eui.UIComponent","egret.DisplayObject"]);